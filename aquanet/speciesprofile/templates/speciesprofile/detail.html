{% extends 'speciesprofile/base.html'%}
{% load static%}
{% block content %}
<div class="card">
    <div class="d-flex flex-row">
        <div>
            {% if profile.author == user %}
            <div>
                <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                    <button type="button" class="btn btn-secondary">Options</button>
                    <div class="btn-group" role="group">
                        <button id="btnGroupDrop1" type="button" class="btn btn-secondary dropdown-toggle"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>
                        <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
                            <a class="dropdown-item" href="{% url 'speciesprofile:update' profile.id %}">Edit Post</a>
                            <a class="dropdown-item" href="{% url 'speciesprofile:delete' profile.id %}">Delete Post</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}

            <div class="carousel-container">
                <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" data-interval="10000">
                    <ol id="sortable" class="carousel-indicators">
                        {% for image in images %}
                        {% if image.image %}
                        <li data-target="#carouselExampleIndicators" data-slide-to="{{forloop.counter0}}"
                            class="{% if forloop.counter0 == 0 %}active{% endif %}">
                            {% if image.aspect_ratio < 0.75 %}
                                <img class="rounded mx-auto d-block" src="{{ image.image.url }}" height="100">
                            {% elif image.aspect_ratio > 2.3 %}
                                <img class="rounded mx-auto d-block" src="{{ image.image.url }}" width="100">
                            {% else %}
                                <img class="rounded mx-auto d-block" src="{{ image.image.url }}" width="100" height="100">
                            {% endif %}
                        </li>
                        {% endif %}
                        {% endfor %}
                    </ol>
                    <div class="carousel-inner">
                        {% for image in images %}
                        {% if image.image %}
                        <div class="carousel-item inner-bg {% if forloop.counter0 == 0 %}active{% endif %}">
                            {% if image.aspect_ratio > 1.54 %}
                            <img class="rounded mx-auto d-block" src="{{ image.image.url }}" width="800">
                            {% elif image.aspect_ratio < 1.2 %}
                            <img class="rounded mx-auto d-block" src="{{ image.image.url }}" height="580">
                            {% else %}
                            <img class="rounded mx-auto d-block" src="{{ image.image.url }}" width="800" height="580">
                            {% endif %}
                        </div>
                        {% endif %}
                        {% endfor %}
                        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button"
                           data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button"
                           data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="mt-50px w-100 mr-50px">
            <div class="d-flex justify-content-between">
                <div>
                   {% if profile.common_name %}
                    <div class="common-title">{{profile.common_name}}</div> <div class="species-title">({{profile.species}})</div>
                    {% else %}
                    <div class="common-title font-italic">{{profile.species}}</div>
                    {% endif %}
                </div>
                <div class="d-flex">
                    <div class="price-box">
                        {% if profile.for_sale == True %}
                        <div>${{profile.price|floatformat:2}}</div>
                        {% endif %}
                    </div>
                    {% if user != profile.author %}
                    <div class="ml-1">
                        <form action="{% url 'userschat:room' profile.author.username %}">
                            <button type="submit">Message</button>
                        </form>
                    </div>
                    {% endif %}
                </div>
            </div>
            <hr class="detail-divider">
            <div class="attributes-text">{{profile.water_type}}water</div>
            <hr class="light-blue-divider w-25">
            <div class="attributes-text">Max Size: {{profile.max_size}} cm</div>
            <hr class="light-blue-divider w-25">
            {% if profile.description %}
                <div class="description-box">Description: {{profile.description}}</div>
            {% endif %}
            <div>
                <small class="text-muted"><a href="{% url 'users:profile' profile.author %}">{{profile.author}}</a></small>
            </div>
        </div>
    </div>
    <h1 class="mt-150px">Google maps section</h1>
</div>
{% endblock %}

